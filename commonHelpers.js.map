{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"44094007-67477d06fc63ea0136e02e71a\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: \"15\"\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(images) {\n  const galleryContainer = document.querySelector('.galleriesBox');\n  const markup = images\n    .map(image => {\n      return `\n      <a class=\"gallery-item\" href=\"${image.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <div class=\"info\">\n          <p class=\"info-item\"><span>Likes:</span> ${image.likes}</p>\n          <p class=\"info-item\"><span>Views:</span> ${image.views}</p>\n          <p class=\"info-item\"><span>Comments:</span> ${image.comments}</p>\n          <p class=\"info-item\"><span>Downloads:</span> ${image.downloads}</p>\n        </div>\n      </a>`;\n    })\n    .join('');\n\n  galleryContainer.innerHTML = markup;\n  const lightbox = new SimpleLightbox('.gallery-item');\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  const galleryContainer = document.querySelector('.galleriesBox');\n  galleryContainer.innerHTML = '';\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-data');\nconst gallery = document.querySelector('.galleriesBox');\n\nlet currentPage = 1;\nconst perPage = 15;\nlet currentQuery = '';\n\nform.addEventListener('submit', onSearch);\n\nfunction onSearch(event) {\n  event.preventDefault();\n\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please, enter a search query',\n    });\n    return;\n  }\n  clearGallery();\n  currentPage = 1;\n  currentQuery = query;\n  showLoader();\n\n  fetchImages(query)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again.',\n        });\n      } else {\n        renderGallery(data.hits);\n        if (data.hits.length < perPage) {\n          hideLoadMoreButton();\n        } else {\n          showLoadMoreButton();\n        }\n        smoothScroll();\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        position: 'topRight',\n        message: 'Error',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction showLoader() {\n  document.querySelector('.loader').style.display = 'block';\n}\n\nfunction hideLoader() {\n  document.querySelector('.loader').style.display = 'none';\n}\n\nfunction smoothScroll() {\n  const cardHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\ndocument.querySelector('.galleryBtn').addEventListener('click', () => {\n  loadImages();\n});\n\nfunction showLoadMoreButton() {\n  if (document.querySelector('.galleryBtn').style.display === 'none') {\n    document.querySelector('.galleryBtn').style.display = 'block';\n  }\n}\n\nfunction hideLoadMoreButton() {\n  document.querySelector('.galleryBtn').style.display = 'none';\n}\n\nfunction renderGalleryAppend(images) {\n  const fragment = document.createDocumentFragment();\n  images.forEach(imageData => {\n    const img = document.createElement('img');\n    img.src = imageData.webformatURL;\n    img.alt = imageData.tags;\n    fragment.appendChild(img);\n  });\n  gallery.appendChild(fragment);\n}\n\nfunction loadImages() {\n  fetchImages(currentQuery, currentPage, perPage)\n    .then(data => {\n      if (data.hits.length === 0 || currentPage >= data.totalHits / perPage) {\n        hideLoadMoreButton();\n        iziToast.error({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        renderGalleryAppend(data.hits);\n        currentPage++;\n        smoothScroll();\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        position: 'topRight',\n        message: 'Error',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","error","renderGallery","images","galleryContainer","markup","image","SimpleLightbox","clearGallery","form","input","gallery","currentPage","perPage","currentQuery","onSearch","event","iziToast","showLoader","data","hideLoadMoreButton","showLoadMoreButton","smoothScroll","hideLoader","cardHeight","loadImages","renderGalleryAppend","fragment","imageData","img"],"mappings":"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"}